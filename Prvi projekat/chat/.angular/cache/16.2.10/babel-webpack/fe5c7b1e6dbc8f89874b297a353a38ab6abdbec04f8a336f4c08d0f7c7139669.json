{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, ElementRef, ViewChild } from '@angular/core';\nexport let ChatComponent = class ChatComponent {\n  constructor(service) {\n    this.service = service;\n    this.myScrollContainer = new ElementRef('scrollable');\n    this.messages = [];\n    this.messages$ = this.service.messageStream.subscribe(message => {\n      this.messages.push(message);\n    });\n    this.messageText = '';\n    window.onbeforeunload = () => this.ngOnDestroy();\n  }\n  ngOnInit() {\n    this.service.connect();\n  }\n  ngOnDestroy() {\n    console.log(`Destroy pozvan`);\n    this.service.disconnect();\n  }\n  ngAfterViewChecked() {\n    this.scrollToBottom();\n  }\n  scrollToBottom() {\n    try {\n      this.myScrollContainer.nativeElement.scrollTop = this.myScrollContainer.nativeElement.scrollHeight;\n    } catch (err) {}\n  }\n  sendMessage() {\n    this.service.sendMessage(this.messageText);\n    this.messageText = '';\n  }\n};\n__decorate([ViewChild('scrollable')], ChatComponent.prototype, \"myScrollContainer\", void 0);\nChatComponent = __decorate([Component({\n  selector: 'app-chat',\n  templateUrl: './chat.component.html',\n  styleUrls: ['./chat.component.scss']\n})], ChatComponent);","map":{"version":3,"names":["Component","ElementRef","ViewChild","ChatComponent","constructor","service","myScrollContainer","messages","messages$","messageStream","subscribe","message","push","messageText","window","onbeforeunload","ngOnDestroy","ngOnInit","connect","console","log","disconnect","ngAfterViewChecked","scrollToBottom","nativeElement","scrollTop","scrollHeight","err","sendMessage","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\MihajloBencun\\Desktop\\Faks\\Zastita informacija\\Prvi projekat\\chat\\src\\app\\chat\\chat.component.ts"],"sourcesContent":["import { AfterViewChecked, Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { ChatService } from './chat.service';\nimport { Message } from '../models/message.dto';\n\n@Component({\n  selector: 'app-chat',\n  templateUrl: './chat.component.html',\n  styleUrls: ['./chat.component.scss']\n})\nexport class ChatComponent implements OnInit, OnDestroy, AfterViewChecked{\n  @ViewChild('scrollable') private myScrollContainer: ElementRef = new ElementRef('scrollable');\n  messages: Message[] = [];\n  messages$ = this.service.messageStream.subscribe((message) => {\n    this.messages.push(message);\n  });\n  messageText : string = '';\n  constructor(private service: ChatService) {\n    window.onbeforeunload = () => this.ngOnDestroy();\n   }\n  ngOnInit(){\n    this.service.connect();\n    \n  }\n  ngOnDestroy(): void {\n    console.log(`Destroy pozvan`);\n    this.service.disconnect();\n  }\n  ngAfterViewChecked(): void {\n    this.scrollToBottom();\n  }\n  scrollToBottom():void {\n    try {\n        this.myScrollContainer.nativeElement.scrollTop = this.myScrollContainer.nativeElement.scrollHeight;\n    } catch(err) { }                 \n  }\n\n  sendMessage(){\n    this.service.sendMessage(this.messageText);\n    this.messageText = '';\n  }\n}\n"],"mappings":";AAAA,SAA2BA,SAAS,EAAEC,UAAU,EAAqBC,SAAS,QAAQ,eAAe;AAS9F,WAAMC,aAAa,GAAnB,MAAMA,aAAa;EAOxBC,YAAoBC,OAAoB;IAApB,KAAAA,OAAO,GAAPA,OAAO;IANM,KAAAC,iBAAiB,GAAe,IAAIL,UAAU,CAAC,YAAY,CAAC;IAC7F,KAAAM,QAAQ,GAAc,EAAE;IACxB,KAAAC,SAAS,GAAG,IAAI,CAACH,OAAO,CAACI,aAAa,CAACC,SAAS,CAAEC,OAAO,IAAI;MAC3D,IAAI,CAACJ,QAAQ,CAACK,IAAI,CAACD,OAAO,CAAC;IAC7B,CAAC,CAAC;IACF,KAAAE,WAAW,GAAY,EAAE;IAEvBC,MAAM,CAACC,cAAc,GAAG,MAAM,IAAI,CAACC,WAAW,EAAE;EACjD;EACDC,QAAQA,CAAA;IACN,IAAI,CAACZ,OAAO,CAACa,OAAO,EAAE;EAExB;EACAF,WAAWA,CAAA;IACTG,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;IAC7B,IAAI,CAACf,OAAO,CAACgB,UAAU,EAAE;EAC3B;EACAC,kBAAkBA,CAAA;IAChB,IAAI,CAACC,cAAc,EAAE;EACvB;EACAA,cAAcA,CAAA;IACZ,IAAI;MACA,IAAI,CAACjB,iBAAiB,CAACkB,aAAa,CAACC,SAAS,GAAG,IAAI,CAACnB,iBAAiB,CAACkB,aAAa,CAACE,YAAY;KACrG,CAAC,OAAMC,GAAG,EAAE;EACf;EAEAC,WAAWA,CAAA;IACT,IAAI,CAACvB,OAAO,CAACuB,WAAW,CAAC,IAAI,CAACf,WAAW,CAAC;IAC1C,IAAI,CAACA,WAAW,GAAG,EAAE;EACvB;CACD;AA9BkCgB,UAAA,EAAhC3B,SAAS,CAAC,YAAY,CAAC,C,uDAAsE;AADnFC,aAAa,GAAA0B,UAAA,EALzB7B,SAAS,CAAC;EACT8B,QAAQ,EAAE,UAAU;EACpBC,WAAW,EAAE,uBAAuB;EACpCC,SAAS,EAAE,CAAC,uBAAuB;CACpC,CAAC,C,EACW7B,aAAa,CA+BzB"},"metadata":{},"sourceType":"module","externalDependencies":[]}