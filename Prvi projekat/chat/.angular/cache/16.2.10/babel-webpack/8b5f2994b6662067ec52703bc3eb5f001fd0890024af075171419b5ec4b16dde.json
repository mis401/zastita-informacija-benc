{"ast":null,"code":"import { ElementRef } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./chat.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nconst _c0 = [\"scrollable\"];\nfunction ChatComponent_div_5_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"div\", 13)(2, \"div\", 14);\n    i0.ɵɵelement(3, \"p\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const m_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(m_r2.text);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(m_r2.crypto);\n  }\n}\nfunction ChatComponent_div_5_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"div\", 13)(2, \"p\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const m_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(m_r2.text);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(m_r2.crypto);\n  }\n}\nfunction ChatComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, ChatComponent_div_5_div_1_Template, 8, 2, \"div\", 10);\n    i0.ɵɵtemplate(2, ChatComponent_div_5_ng_template_2_Template, 6, 2, \"ng-template\", null, 11, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const m_r2 = ctx.$implicit;\n    const _r4 = i0.ɵɵreference(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", m_r2.owner == true)(\"ngIfElse\", _r4);\n  }\n}\nexport class ChatComponent {\n  constructor(service) {\n    this.service = service;\n    this.myScrollContainer = new ElementRef('scrollable');\n    this.messages = [];\n    this.messages$ = this.service.messageStream.subscribe(message => {\n      this.messages.push(message);\n    });\n    this.messageText = '';\n    window.onbeforeunload = () => this.ngOnDestroy();\n  }\n  ngOnInit() {\n    this.service.connect();\n  }\n  ngOnDestroy() {\n    console.log(`Destroy pozvan`);\n    this.service.disconnect();\n  }\n  ngAfterViewChecked() {\n    this.scrollToBottom();\n  }\n  scrollToBottom() {\n    try {\n      this.myScrollContainer.nativeElement.scrollTop = this.myScrollContainer.nativeElement.scrollHeight;\n    } catch (err) {}\n  }\n  sendMessage() {\n    this.service.sendMessage(this.messageText);\n    this.messageText = '';\n  }\n  static #_ = this.ɵfac = function ChatComponent_Factory(t) {\n    return new (t || ChatComponent)(i0.ɵɵdirectiveInject(i1.ChatService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ChatComponent,\n    selectors: [[\"app-chat\"]],\n    viewQuery: function ChatComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.myScrollContainer = _t.first);\n      }\n    },\n    decls: 11,\n    vars: 2,\n    consts: [[1, \"h-full\", \"bg-gray-700\"], [1, \"min-h-screen\", \"chat\"], [1, \"inner-chat\"], [\"scrollable\", \"\"], [1, \"chat-card\"], [4, \"ngFor\", \"ngForOf\"], [1, \"akcije\"], [1, \"input-poruke\", \"flex\", \"flex-row\"], [\"type\", \"text\", \"placeholder\", \"Poruka\", 3, \"ngModel\", \"keydown.enter\", \"ngModelChange\"], [\"type\", \"reset\", 1, \"bg-green-500\", 3, \"click\"], [\"class\", \"chat-msg-wrap sender\", 4, \"ngIf\", \"ngIfElse\"], [\"receiver\", \"\"], [1, \"chat-msg-wrap\", \"sender\"], [1, \"chat-msg\"], [1, \"bg-d2effc\"], [1, \"chat-msg-wrap\", \"receiver\"]],\n    template: function ChatComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2, 3)(4, \"div\", 4);\n        i0.ɵɵtemplate(5, ChatComponent_div_5_Template, 4, 2, \"div\", 5);\n        i0.ɵɵelementStart(6, \"div\", 6)(7, \"div\", 7)(8, \"input\", 8);\n        i0.ɵɵlistener(\"keydown.enter\", function ChatComponent_Template_input_keydown_enter_8_listener() {\n          return ctx.sendMessage();\n        })(\"ngModelChange\", function ChatComponent_Template_input_ngModelChange_8_listener($event) {\n          return ctx.messageText = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function ChatComponent_Template_button_click_9_listener() {\n          return ctx.sendMessage();\n        });\n        i0.ɵɵtext(10, \" Po\\u0161alji \");\n        i0.ɵɵelementEnd()()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.messages);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.messageText);\n      }\n    },\n    dependencies: [i2.NgForOf, i2.NgIf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel],\n    styles: [\".chat[_ngcontent-%COMP%] {\\n  border: 1px solid #ccc;\\n  background-color: #2a323e;\\n  padding: 20px;\\n  border-radius: 10px;\\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\\n  overflow: hidden;\\n}\\n\\n.inner-chat[_ngcontent-%COMP%] {\\n  position: relative;\\n  min-height: 200px;\\n  max-height: 600px;\\n  overflow-y: auto;\\n  overflow-x: hidden;\\n  padding: 10px;\\n  margin-bottom: 10px;\\n  border-radius: 10px;\\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\\n}\\n\\n.chat-msg-wrap[_ngcontent-%COMP%] {\\n  width: 100%;\\n  margin-bottom: 10px;\\n}\\n\\n.chat-msg[_ngcontent-%COMP%] {\\n  width: -moz-fit-content;\\n  width: fit-content;\\n  border: 1px solid #ccc;\\n  padding: 10px;\\n  margin: 5px;\\n  border-radius: 8px;\\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\\n}\\n\\n.receiver[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: flex-start;\\n}\\n\\n.receiver[_ngcontent-%COMP%]   .chat-msg[_ngcontent-%COMP%] {\\n  background-color: #b8dfb5;\\n  color: #333333;\\n}\\n\\n.sender[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: flex-end;\\n}\\n\\n.chat-msg-doctor[_ngcontent-%COMP%] {\\n  background-color: #ff4343;\\n  width: -moz-fit-content;\\n  width: fit-content;\\n  border: 1px solid #ccc;\\n  padding: 10px;\\n  margin: 5px;\\n  border-radius: 8px;\\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\\n}\\n\\n.sender[_ngcontent-%COMP%]   .chat-msg[_ngcontent-%COMP%] {\\n  background-color: #d2effc;\\n  color: #333333;\\n}\\n\\n.chat-card[_ngcontent-%COMP%] {\\n  background-color: #475569;\\n  border-radius: 10px;\\n  padding: 20px;\\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\\n}\\n\\n.input-poruke[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n}\\n\\n.mat-form-field[_ngcontent-%COMP%] {\\n  width: 100%;\\n  margin-right: 10px;\\n}\\n\\nbutton[type=reset][_ngcontent-%COMP%] {\\n  color: #ffffff;\\n  border-radius: 5px;\\n  padding: 10px 20px;\\n}\\n\\n.spinner[_ngcontent-%COMP%] {\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  transform: translate(-50%, -50%);\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY2hhdC9jaGF0LmNvbXBvbmVudC5zY3NzIiwid2VicGFjazovLy4vLi4vLi4vLi4vWmFzdGl0YSUyMGluZm9ybWFjaWphL1BydmklMjBwcm9qZWthdC9jaGF0L3NyYy9hcHAvY2hhdC9jaGF0LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBO0VBQ0ksc0JBQUE7RUFFQSx5QkFBQTtFQUNBLGFBQUE7RUFDQSxtQkFBQTtFQUNBLHdDQUFBO0VBQ0EsZ0JBQUE7QUNESjs7QURJQTtFQUNJLGtCQUFBO0VBQ0EsaUJBQUE7RUFDQSxpQkFBQTtFQUNBLGdCQUFBO0VBQ0Esa0JBQUE7RUFDQSxhQUFBO0VBQ0EsbUJBQUE7RUFDQSxtQkFBQTtFQUNBLHdDQUFBO0FDREo7O0FESUU7RUFFRSxXQUFBO0VBQ0EsbUJBQUE7QUNGSjs7QURLRTtFQUNFLHVCQUFBO0VBQUEsa0JBQUE7RUFDQSxzQkFBQTtFQUNBLGFBQUE7RUFDQSxXQUFBO0VBQ0Esa0JBQUE7RUFDQSx3Q0FBQTtBQ0ZKOztBREtFO0VBQ0UsYUFBQTtFQUNBLDJCQUFBO0FDRko7O0FES0U7RUFDRSx5QkFBQTtFQUNBLGNBQUE7QUNGSjs7QURLRTtFQUNFLGFBQUE7RUFDQSx5QkFBQTtBQ0ZKOztBRElFO0VBQ0UseUJBQUE7RUFDQSx1QkFBQTtFQUFBLGtCQUFBO0VBQ0Esc0JBQUE7RUFDQSxhQUFBO0VBQ0EsV0FBQTtFQUNBLGtCQUFBO0VBQ0Esd0NBQUE7QUNESjs7QURJRTtFQUNFLHlCQUFBO0VBQ0EsY0FBQTtBQ0RKOztBRElFO0VBQ0UseUJBQUE7RUFDQSxtQkFBQTtFQUNBLGFBQUE7RUFDQSx3Q0FBQTtBQ0RKOztBRElFO0VBQ0UsYUFBQTtFQUNBLG1CQUFBO0FDREo7O0FESUU7RUFDRSxXQUFBO0VBQ0Esa0JBQUE7QUNESjs7QURJRTtFQUNFLGNBQUE7RUFDQSxrQkFBQTtFQUNBLGtCQUFBO0FDREo7O0FESUU7RUFDRSxrQkFBQTtFQUNBLFFBQUE7RUFDQSxTQUFBO0VBQ0EsZ0NBQUE7QUNESiIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4uY2hhdCB7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xyXG4gICAgXHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmEzMjNlO1xyXG4gICAgcGFkZGluZzogMjBweDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XHJcbiAgICBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xyXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICB9XHJcbiAgXHJcbi5pbm5lci1jaGF0e1xyXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgbWluLWhlaWdodDogMjAwcHg7XHJcbiAgICBtYXgtaGVpZ2h0OiA2MDBweDtcclxuICAgIG92ZXJmbG93LXk6IGF1dG87XHJcbiAgICBvdmVyZmxvdy14OiBoaWRkZW47XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XHJcbiAgICBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xyXG59XHJcblxyXG4gIC5jaGF0LW1zZy13cmFwIHtcclxuICAgIFxyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xyXG4gIH1cclxuICBcclxuICAuY2hhdC1tc2cge1xyXG4gICAgd2lkdGg6IGZpdC1jb250ZW50O1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcclxuICAgIHBhZGRpbmc6IDEwcHg7XHJcbiAgICBtYXJnaW46IDVweDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDhweDtcclxuICAgIGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsIDAsIDAsIDAuMSk7XHJcbiAgfVxyXG4gIFxyXG4gIC5yZWNlaXZlciB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0O1xyXG4gIH1cclxuICBcclxuICAucmVjZWl2ZXIgLmNoYXQtbXNnIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNiOGRmYjU7XHJcbiAgICBjb2xvcjogIzMzMzMzMztcclxuICB9XHJcbiAgXHJcbiAgLnNlbmRlciB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcclxuICB9XHJcbiAgLmNoYXQtbXNnLWRvY3RvcntcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmZjQzNDM7XHJcbiAgICB3aWR0aDogZml0LWNvbnRlbnQ7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xyXG4gICAgcGFkZGluZzogMTBweDtcclxuICAgIG1hcmdpbjogNXB4O1xyXG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xyXG4gICAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcclxuICB9XHJcbiAgXHJcbiAgLnNlbmRlciAuY2hhdC1tc2cge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2QyZWZmYztcclxuICAgIGNvbG9yOiAjMzMzMzMzO1xyXG4gIH1cclxuICBcclxuICAuY2hhdC1jYXJkIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICM0NzU1Njk7XHJcbiAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gICAgcGFkZGluZzogMjBweDtcclxuICAgIGJveC1zaGFkb3c6IDAgNHB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMSk7XHJcbiAgfVxyXG4gIFxyXG4gIC5pbnB1dC1wb3J1a2Uge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgfVxyXG4gIFxyXG4gIC5tYXQtZm9ybS1maWVsZCB7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIG1hcmdpbi1yaWdodDogMTBweDtcclxuICB9XHJcbiAgXHJcbiAgYnV0dG9uW3R5cGU9XCJyZXNldFwiXSB7XHJcbiAgICBjb2xvcjogI2ZmZmZmZjtcclxuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgIHBhZGRpbmc6IDEwcHggMjBweDtcclxuICB9XHJcblxyXG4gIC5zcGlubmVye1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgdG9wOiA1MCU7XHJcbiAgICBsZWZ0OiA1MCU7XHJcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcclxuICB9XHJcblxyXG4gICIsIi5jaGF0IHtcbiAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcbiAgYmFja2dyb3VuZC1jb2xvcjogIzJhMzIzZTtcbiAgcGFkZGluZzogMjBweDtcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbn1cblxuLmlubmVyLWNoYXQge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIG1pbi1oZWlnaHQ6IDIwMHB4O1xuICBtYXgtaGVpZ2h0OiA2MDBweDtcbiAgb3ZlcmZsb3cteTogYXV0bztcbiAgb3ZlcmZsb3cteDogaGlkZGVuO1xuICBwYWRkaW5nOiAxMHB4O1xuICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICBib3JkZXItcmFkaXVzOiAxMHB4O1xuICBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xufVxuXG4uY2hhdC1tc2ctd3JhcCB7XG4gIHdpZHRoOiAxMDAlO1xuICBtYXJnaW4tYm90dG9tOiAxMHB4O1xufVxuXG4uY2hhdC1tc2cge1xuICB3aWR0aDogZml0LWNvbnRlbnQ7XG4gIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XG4gIHBhZGRpbmc6IDEwcHg7XG4gIG1hcmdpbjogNXB4O1xuICBib3JkZXItcmFkaXVzOiA4cHg7XG4gIGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsIDAsIDAsIDAuMSk7XG59XG5cbi5yZWNlaXZlciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDtcbn1cblxuLnJlY2VpdmVyIC5jaGF0LW1zZyB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNiOGRmYjU7XG4gIGNvbG9yOiAjMzMzMzMzO1xufVxuXG4uc2VuZGVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbn1cblxuLmNoYXQtbXNnLWRvY3RvciB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmZjQzNDM7XG4gIHdpZHRoOiBmaXQtY29udGVudDtcbiAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcbiAgcGFkZGluZzogMTBweDtcbiAgbWFyZ2luOiA1cHg7XG4gIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbn1cblxuLnNlbmRlciAuY2hhdC1tc2cge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDJlZmZjO1xuICBjb2xvcjogIzMzMzMzMztcbn1cblxuLmNoYXQtY2FyZCB7XG4gIGJhY2tncm91bmQtY29sb3I6ICM0NzU1Njk7XG4gIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gIHBhZGRpbmc6IDIwcHg7XG4gIGJveC1zaGFkb3c6IDAgNHB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMSk7XG59XG5cbi5pbnB1dC1wb3J1a2Uge1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xufVxuXG4ubWF0LWZvcm0tZmllbGQge1xuICB3aWR0aDogMTAwJTtcbiAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xufVxuXG5idXR0b25bdHlwZT1yZXNldF0ge1xuICBjb2xvcjogI2ZmZmZmZjtcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xuICBwYWRkaW5nOiAxMHB4IDIwcHg7XG59XG5cbi5zcGlubmVyIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDUwJTtcbiAgbGVmdDogNTAlO1xuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"names":["ElementRef","i0","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵtext","ɵɵadvance","ɵɵtextInterpolate","m_r2","text","crypto","ɵɵtemplate","ChatComponent_div_5_div_1_Template","ChatComponent_div_5_ng_template_2_Template","ɵɵtemplateRefExtractor","ɵɵproperty","owner","_r4","ChatComponent","constructor","service","myScrollContainer","messages","messages$","messageStream","subscribe","message","push","messageText","window","onbeforeunload","ngOnDestroy","ngOnInit","connect","console","log","disconnect","ngAfterViewChecked","scrollToBottom","nativeElement","scrollTop","scrollHeight","err","sendMessage","_","ɵɵdirectiveInject","i1","ChatService","_2","selectors","viewQuery","ChatComponent_Query","rf","ctx","ChatComponent_div_5_Template","ɵɵlistener","ChatComponent_Template_input_keydown_enter_8_listener","ChatComponent_Template_input_ngModelChange_8_listener","$event","ChatComponent_Template_button_click_9_listener"],"sources":["C:\\Users\\MihajloBencun\\Desktop\\Faks\\Zastita informacija\\Prvi projekat\\chat\\src\\app\\chat\\chat.component.ts","C:\\Users\\MihajloBencun\\Desktop\\Faks\\Zastita informacija\\Prvi projekat\\chat\\src\\app\\chat\\chat.component.html"],"sourcesContent":["import { AfterViewChecked, Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { ChatService } from './chat.service';\nimport { Message } from '../models/message.dto';\n\n@Component({\n  selector: 'app-chat',\n  templateUrl: './chat.component.html',\n  styleUrls: ['./chat.component.scss']\n})\nexport class ChatComponent implements OnInit, OnDestroy, AfterViewChecked{\n  @ViewChild('scrollable') private myScrollContainer: ElementRef = new ElementRef('scrollable');\n  messages: Message[] = [];\n  messages$ = this.service.messageStream.subscribe((message) => {\n    this.messages.push(message);\n  });\n  messageText : string = '';\n  constructor(private service: ChatService) {\n    window.onbeforeunload = () => this.ngOnDestroy();\n   }\n  ngOnInit(){\n    this.service.connect();\n    \n  }\n  ngOnDestroy(): void {\n    console.log(`Destroy pozvan`);\n    this.service.disconnect();\n  }\n  ngAfterViewChecked(): void {\n    this.scrollToBottom();\n  }\n  scrollToBottom():void {\n    try {\n        this.myScrollContainer.nativeElement.scrollTop = this.myScrollContainer.nativeElement.scrollHeight;\n    } catch(err) { }                 \n  }\n\n  sendMessage(){\n    this.service.sendMessage(this.messageText);\n    this.messageText = '';\n  }\n}\n","<div class=\"h-full bg-gray-700\">\n    <div class=\"min-h-screen chat\">\n        <div #scrollable class=\"inner-chat\">\n            <div class=\"chat-card\">\n                <div *ngFor=\"let m of messages\">\n                    <div *ngIf=\"m.owner==true; else receiver\" class=\"chat-msg-wrap sender\">\n                        <div class=\"chat-msg\">\n                            <div class=\"bg-d2effc\">\n                                <p></p>\n                            </div>\n                            <p>{{m.text}}</p>\n                            <p>{{m.crypto}}</p>\n                        </div>\n                    </div>\n                    <ng-template #receiver>\n                        <div class=\"chat-msg-wrap receiver\">\n                            <div class=\"chat-msg\">\n                                <p>{{m.text}}</p>\n                                <p>{{m.crypto}}</p>\n                            </div>\n                        </div>\n                    </ng-template>\n                </div>\n                <div class=\"akcije\">\n                    <div class=\"input-poruke flex flex-row \">\n                        <input type=\"text\" placeholder=\"Poruka\" (keydown.enter)=\"sendMessage()\" [(ngModel)]=\"messageText\">\n                        <button class=\"bg-green-500\" type=\"reset\" (click)=\"sendMessage()\">\n                            Pošalji\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}