{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, ElementRef, ViewChild } from '@angular/core';\nimport { EncryptionType } from '../models/algorithms';\nexport let ChatComponent = class ChatComponent {\n  constructor(service) {\n    this.service = service;\n    this.myScrollContainer = new ElementRef('scrollable');\n    this.messages = [];\n    this.toggleEncryption = false;\n    this.encryptionType = EncryptionType.RC4;\n    this.messages$ = this.service.messageStream.subscribe(message => {\n      console.log(message);\n      this.messages.push(message);\n    });\n    this.messageText = '';\n    window.onbeforeunload = () => this.ngOnDestroy();\n  }\n  ngOnInit() {\n    this.service.connect();\n  }\n  ngOnDestroy() {\n    console.log(`Destroy pozvan`);\n    this.service.disconnect();\n  }\n  ngAfterViewChecked() {\n    this.scrollToBottom();\n  }\n  scrollToBottom() {\n    try {\n      this.myScrollContainer.nativeElement.scrollTop = this.myScrollContainer.nativeElement.scrollHeight;\n    } catch (err) {}\n  }\n  sendMessage() {\n    this.service.sendMessage(this.messageText);\n    this.messageText = '';\n  }\n};\n__decorate([ViewChild('scrollable')], ChatComponent.prototype, \"myScrollContainer\", void 0);\nChatComponent = __decorate([Component({\n  selector: 'app-chat',\n  templateUrl: './chat.component.html',\n  styleUrls: ['./chat.component.scss']\n})], ChatComponent);","map":{"version":3,"names":["Component","ElementRef","ViewChild","EncryptionType","ChatComponent","constructor","service","myScrollContainer","messages","toggleEncryption","encryptionType","RC4","messages$","messageStream","subscribe","message","console","log","push","messageText","window","onbeforeunload","ngOnDestroy","ngOnInit","connect","disconnect","ngAfterViewChecked","scrollToBottom","nativeElement","scrollTop","scrollHeight","err","sendMessage","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\MihajloBencun\\Desktop\\Faks\\Zastita informacija\\Prvi projekat\\zastita-informacija-benc\\Prvi projekat\\chat\\src\\app\\chat\\chat.component.ts"],"sourcesContent":["import { AfterViewChecked, Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { ChatService } from './chat.service';\nimport { Message } from '../models/message.dto';\nimport { EncryptionType } from '../models/algorithms';\n\n@Component({\n  selector: 'app-chat',\n  templateUrl: './chat.component.html',\n  styleUrls: ['./chat.component.scss']\n})\nexport class ChatComponent implements OnInit, OnDestroy, AfterViewChecked{\n  @ViewChild('scrollable') private myScrollContainer: ElementRef = new ElementRef('scrollable');\n  messages: Message[] = [];\n  toggleEncryption: boolean = false;\n  encryptionType: EncryptionType = EncryptionType.RC4;\n  messages$ = this.service.messageStream.subscribe((message) => {\n    console.log(message);\n    this.messages.push(message);\n  });\n  messageText : string = '';\n  constructor(private service: ChatService) {\n    window.onbeforeunload = () => this.ngOnDestroy();\n   }\n  ngOnInit(){\n    this.service.connect();\n    \n  }\n  ngOnDestroy(): void {\n    console.log(`Destroy pozvan`);\n    this.service.disconnect();\n  }\n  ngAfterViewChecked(): void {\n    this.scrollToBottom();\n  }\n  scrollToBottom():void {\n    try {\n        this.myScrollContainer.nativeElement.scrollTop = this.myScrollContainer.nativeElement.scrollHeight;\n    } catch(err) { }                 \n  }\n\n  sendMessage(){\n    this.service.sendMessage(this.messageText);\n    this.messageText = '';\n  }\n}\n"],"mappings":";AAAA,SAA2BA,SAAS,EAAEC,UAAU,EAAqBC,SAAS,QAAQ,eAAe;AAGrG,SAASC,cAAc,QAAQ,sBAAsB;AAO9C,WAAMC,aAAa,GAAnB,MAAMA,aAAa;EAUxBC,YAAoBC,OAAoB;IAApB,KAAAA,OAAO,GAAPA,OAAO;IATM,KAAAC,iBAAiB,GAAe,IAAIN,UAAU,CAAC,YAAY,CAAC;IAC7F,KAAAO,QAAQ,GAAc,EAAE;IACxB,KAAAC,gBAAgB,GAAY,KAAK;IACjC,KAAAC,cAAc,GAAmBP,cAAc,CAACQ,GAAG;IACnD,KAAAC,SAAS,GAAG,IAAI,CAACN,OAAO,CAACO,aAAa,CAACC,SAAS,CAAEC,OAAO,IAAI;MAC3DC,OAAO,CAACC,GAAG,CAACF,OAAO,CAAC;MACpB,IAAI,CAACP,QAAQ,CAACU,IAAI,CAACH,OAAO,CAAC;IAC7B,CAAC,CAAC;IACF,KAAAI,WAAW,GAAY,EAAE;IAEvBC,MAAM,CAACC,cAAc,GAAG,MAAM,IAAI,CAACC,WAAW,EAAE;EACjD;EACDC,QAAQA,CAAA;IACN,IAAI,CAACjB,OAAO,CAACkB,OAAO,EAAE;EAExB;EACAF,WAAWA,CAAA;IACTN,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;IAC7B,IAAI,CAACX,OAAO,CAACmB,UAAU,EAAE;EAC3B;EACAC,kBAAkBA,CAAA;IAChB,IAAI,CAACC,cAAc,EAAE;EACvB;EACAA,cAAcA,CAAA;IACZ,IAAI;MACA,IAAI,CAACpB,iBAAiB,CAACqB,aAAa,CAACC,SAAS,GAAG,IAAI,CAACtB,iBAAiB,CAACqB,aAAa,CAACE,YAAY;KACrG,CAAC,OAAMC,GAAG,EAAE;EACf;EAEAC,WAAWA,CAAA;IACT,IAAI,CAAC1B,OAAO,CAAC0B,WAAW,CAAC,IAAI,CAACb,WAAW,CAAC;IAC1C,IAAI,CAACA,WAAW,GAAG,EAAE;EACvB;CACD;AAjCkCc,UAAA,EAAhC/B,SAAS,CAAC,YAAY,CAAC,C,uDAAsE;AADnFE,aAAa,GAAA6B,UAAA,EALzBjC,SAAS,CAAC;EACTkC,QAAQ,EAAE,UAAU;EACpBC,WAAW,EAAE,uBAAuB;EACpCC,SAAS,EAAE,CAAC,uBAAuB;CACpC,CAAC,C,EACWhC,aAAa,CAkCzB"},"metadata":{},"sourceType":"module","externalDependencies":[]}